<div class="container list-page">
  <div class="row mt-5">
    <h1 class="font-weight-normal">下書き一覧</h1>
  </div>

  <p class="mb-3">
    <%= link_to "投稿する", new_diary_post_path, class: "btn btn-primary mr-2" %>
    <%= link_to "投稿一覧（公開済み）", diary_posts_path, class: "btn btn-outline-secondary" %>
  </p>

  <div class="row mt-3">
    <% if @posts.any? %>
      <% @posts.each do |post| %>
        <div class="col-md-4 mb-4">
          <div class="card h-100 border shadow-sm">
            <div class="card-body p-3">
              <p class="card-text font-weight-bold mb-2"><%= post.location.presence || "（やったことなし）" %></p>
              <% if post.image.attached? %>
                <%= link_to edit_diary_post_path(post) do %>
                  <%= image_tag post.image.variant(resize_to_limit: [300, 200]), class: "img-fluid w-100", style: "object-fit: cover; height: 200px;" %>
                <% end %>
              <% else %>
                <%= link_to edit_diary_post_path(post), class: "d-block bg-light text-muted text-center py-5" do %>
                  画像なし
                <% end %>
              <% end %>
              <p class="card-text mt-2 mb-0 small text-muted"><%= post.text.to_s.truncate(50) %></p>
            </div>
            <div class="card-footer bg-white border-0 pt-0 d-flex flex-wrap gap-1 align-items-center">
              <%= link_to "編集", edit_diary_post_path(post), class: "btn btn-sm btn-outline-primary" %>
              <%= link_to "削除", diary_post_path(post), data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" }, class: "btn btn-sm btn-danger" %>
            </div>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="col-12">
        <p class="text-muted">下書きはまだありません。</p>
      </div>
    <% end %>
  </div>
</div>
