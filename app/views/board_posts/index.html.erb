<div class="container list-page">
  <div class="row mt-5">
    <h1 class="font-weight-normal">掲示板一覧</h1>
  </div>

  <p class="mb-3">
    <%= link_to "掲示板に投稿する", new_board_post_path, class: "btn btn-primary" %>
  </p>

  <div class="row mt-3">
    <% @posts.each do |post| %>
      <div class="col-md-4 mb-4">
        <div class="card h-100 border shadow-sm">
          <div class="card-body p-3">
            <p class="card-text font-weight-bold mb-2"><%= post.user.name %></p>
            <% if post.image.attached? %>
              <%= link_to board_post_path(post) do %>
                <%= image_tag post.image.variant(resize_to_limit: [300, 200]), class: "img-fluid w-100", style: "object-fit: cover; height: 200px;" %>
              <% end %>
            <% else %>
              <%= link_to board_post_path(post), class: "d-block bg-light text-muted text-center py-5" do %>
                画像なし
              <% end %>
            <% end %>
            <p class="card-text mt-2 mb-0"><%= post.location.presence || "—" %></p>
          </div>
          <div class="card-footer bg-white border-0 pt-0 d-flex flex-wrap gap-1 align-items-center">
            <%= link_to "詳細・コメント", board_post_path(post), class: "btn btn-sm btn-outline-secondary" %>
            <% if post.user_id == current_user.id %>
              <%= link_to "編集", edit_board_post_path(post), class: "btn btn-sm btn-outline-primary" %>
              <%= link_to "削除", board_post_path(post), data: { turbo_method: :delete, turbo_confirm: "本当に削除しますか？" }, class: "btn btn-sm btn-danger" %>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>
</div>
